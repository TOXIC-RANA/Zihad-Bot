const fs = require("fs");
const path = require("path");
const axios = require("axios");

module.exports = {
  config: {
    name: "love",
    version: "1.0",
    author: "Zihad",
    countDown: 5,
    role: 2,
    shortDescription: "no prefix",
    longDescription: "no prefix",
    category: "no prefix",
  },

  onStart: async function () {},

  onChat: async function ({ event, message }) {
    const loveEmojis = [
      "‚ù§Ô∏è‚Äçü©π", "‚ù§Ô∏è", "üß°", "üíõ", "üíö", "üíô", "üíñ", "üíó", "üíì", "üíû", "üíï", "üíü", 
      "‚ù£Ô∏è", "üíî", "‚ù§Ô∏è‚Äçüî•", "üíù", "üíò", "üíå"
    ]; // ‡¶è‡¶á ‡¶á‡¶Æ‡ßã‡¶ú‡¶ø‡¶ó‡ßÅ‡¶≤‡ßã‡¶∞ ‡¶Ø‡ßá‡¶ï‡ßã‡¶®‡ßã ‡¶è‡¶ï‡¶ü‡¶ø‡¶§‡ßá ‡¶ü‡ßç‡¶∞‡¶ø‡¶ó‡¶æ‡¶∞ ‡¶π‡¶¨‡ßá

    if (event.body && loveEmojis.includes(event.body.trim())) {
      try {
        const fileUrl =
          "https://drive.google.com/uc?export=download&id=184ECBHC-H2cm4trz_T0Yy9Z7MwTyvaWZ"; // ‡¶ó‡ßÅ‡¶ó‡¶≤ ‡¶°‡ßç‡¶∞‡¶æ‡¶á‡¶≠ ‡¶≠‡ßü‡ßá‡¶∏ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶≤‡¶ø‡¶Ç‡¶ï

        const filePath = path.join(__dirname, "love_audio.mp3");

        axios({
          method: "GET",
          url: fileUrl,
          responseType: "stream",
        }).then((response) => {
          const writer = fs.createWriteStream(filePath);
          response.data.pipe(writer);

          writer.on("finish", () => {
            message.reply({
              body: "üòçü•∞ ‡¶Ü‡¶Æ‡¶ø ‡¶ì ‡¶§‡ßã‡¶Æ‡¶æ‡¶ï‡ßá ‡¶≠‡¶æ‡¶≤‡ßã‡¶¨‡¶æ‡¶∏‡¶ø! ‚ù§Ô∏è",
              attachment: fs.createReadStream(filePath),
            });
          });

          writer.on("error", (err) => {
            console.error("File write error:", err);
            message.reply("‚ùå | ‡¶≠‡ßü‡ßá‡¶∏ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá!");
          });
        });
      } catch (error) {
        console.error("Google Drive file error:", error);
        message.reply("‚ùå | ‡¶≠‡ßü‡ßá‡¶∏ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶æ‡¶ö‡ßç‡¶õ‡ßá ‡¶®‡¶æ!");
      }
    }
  },
};